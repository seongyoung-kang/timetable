jQuery(function(a){var b=a.extend({isMobj:function(b){var c,d=this.pidFrm;return d?("b"===b?c=d.closest("body"):"m"===b?c=d.parent().parent():"s"===b&&(c=a("body",d[0].contentDocument||d[0].contentWindow.document||"")),c):c},ucfirst:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},miniMsg:function(b,c){var d=a('<div class="dxc_minimsg">').html(c);a(b).parent().after(d),d.delay(3e3).fadeOut(2500,function(){a(this).remove()})},reSized:function(){var c=a(".scElps[data-active=true]");c.find("> :eq(0)").width("auto").removeClass("_first"),c.each(function(){var b=a(this),c=b.find("> :eq(1)"),d=b.width(),e=0;c.length&&(c.find("> img").length||c.text().trim()?e=c.addClass("_last").outerWidth(!0):c.remove()),b.find("> :eq(0)").width(d-e-5).addClass("_first")}),a("[data-hottrack]",".scContent").each(function(){var c=a(this),d=c,e=d.find(".scHotTrack"),f=d.attr("data-type"),g=d.outerWidth("gall"!==f)-("widg"===f?7:4);e.length||(e=a('<a class="scHotTrack">').attr("href",d.attr("data-hottrack")||"#"),d.attr("data-hottrack",""),d.is("[data-modal-key]")&&(e.attr({type:"example/modal","data-footer":"__PID_MODAL_FOOTER__","data-header":"__PID_MODAL_HEADER__"}).pidModalWindow(b.isMobj("b")||""),d.removeAttr("data-modal-key"))),"TR"===d[0].tagName?d.find(">td:eq(0)").is(function(){c=a(this).css("position","relative"),e.width(g).height(d.outerHeight()+("lstc"===f?d.next().outerHeight():0))}):e.width(g),c.find(".scHotTrack").length||e.prependTo(c)})}});a("a[href=#siManageBtn]").click(function(){a(".scElps ._first").each(function(){a(this).css("width",a(this).width()-30+"px")}),a(".scCheck").show("slow");var b=a(this).next();return a("select",b).change(function(){var b=a(this).val()||"",c=[];return a("input[name=cart]:checked").each(function(b){c[b]=a(this).val()}),c.length<1?alert("Please select the items.",this)||!1:void exec_json("beluxe.procBeluxeChangeCustomStatus",{mid:current_mid,new_value:b,target_srls:c.join(",")},completeCallModuleAction)}),a("a[data-type]",b).click(function(){switch(a(this).attr("data-type")){case"manage":popopen(request_uri+"?module=document&act=dispDocumentManageDocument","manageDocument");break;case"admin":location.href=current_url.setQuery("act","dispBeluxeAdminModuleInfo")}return!1}),b.show("slow"),a(this).hide().prevAll().hide(),!1}),a("#siCat.tabn,#siCat.colm").each(function(){var b,c,d,e,f=a(this),g=f.hasClass("colm"),h=a(".cArea ul",this),i=a(".cArea li.active:last",this),j=a(".cArea li:first",this);if(g){var k=a("#siLst:not(.noheader), #siHrm:not(.noheader)"),l=a(".scCaLock",this),m=getCookie("scCaLock");if(!k.length)return;"TABLE"===k[0].tagName?a(k[0]).find("th:eq(0)").is(function(){f.appendTo(a(this).css("position","relative"))}):f.appendTo(k[0]).show(),f.width(k.width()-2),l.click(function(){return a(this).toggleClass("active"),setCookie("scCaLock",a(this).hasClass("active")?"":"hide",null,"/"),!1}),"true"==f.attr("data-autohide")&&(a("thead tr:first th:not(.sort), ul.scFrm:first",k).mouseenter(function(b){var c=b.target,d=a("> span.sort:eq(0)",c);d.length&&b.offsetX>d.position().left||f.width(k.width()-2).fadeIn()}),a(document).mousemove(function(b){var c=b.target;a(c).parents().add(c).index(f)>-1||f.is(":hidden")||"1"!=f.css("opacity")||l.hasClass("active")||f.fadeOut()})),"hide"===m&&l.removeClass("active"),"hide"!==m&&f.fadeIn()}e=parseInt(h.css("margin-top"))||0,b=parseInt(h.height())-e,c=parseInt(j.outerHeight(!0)),c>=b?h.css("margin-right","20px"):(d=parseInt((i.position(f)?i.position(f).top:0)/c),d>0&&h.css("margin-top",d*c*-1+"px"),a(".scCaNavi a:eq(0)",this).click(function(){var a=parseInt(h.css("margin-top"));return e>a&&h.css("margin-top",a+c+e+"px"),!1}),a(".scCaNavi a:eq(1)",this).click(function(){var a=parseInt(h.css("margin-top"));return a-c-e>-b&&h.css("margin-top",a-c-e+"px"),!1}),a(".scCaNavi",this).show())}),a(".scInfo[data-autohide=true]","#siLst.gall").each(function(){var b,c=a(this),d=c.next();c.css("cursor","pointer").click(function(){c.prev()[0].click()}).closest(".scItem").mouseenter(function(){return b?!0:(b=!0,d.hide("slow"),void c.fadeIn("slow",function(){b=!1}))}).mouseleave(function(){c.fadeOut(),d.show("slow")})}),a("a[href=#popopen][data-srl]").click(function(){var b=a(this).attr("data-srl")||"";return b&&popopen(b.setQuery("is_poped","1"),"beluxePopup"),!1}),a("a[href=#tbk_action][class=delete]").click(function(){if(!confirm("Do you want to delete the selected trackback?"))return!1;var b=a(this).closest("li").find("a[name^=trackback_]").attr("name").replace(/.*_/g,"");return exec_json("beluxe.procBeluxeDeleteTrackback",{mid:current_mid,trackback_srl:b},completeCallModuleAction),!1}),a("a[href=#his_action][data-mode=delete][data-srl]").click(function(){if(!confirm("Do you want to delete the selected history?"))return!1;var b=a(this).attr("data-srl")||0,c=a(this).attr("data-doc")||0;return exec_json("beluxe.procBeluxeDeleteHistory",{mid:current_mid,history_srl:b,document_srl:c},completeCallModuleAction),!1}),a("a[href^=#][href$=recommend][data-type]").click(function(){var c=a(this),d=c.attr("href"),e=c.attr("data-type"),f=c.attr("data-srl"),g={target_srl:f,cur_mid:current_mid,mid:current_mid};return exec_json(e+".proc"+b.ucfirst(e)+("#recommend"==d?"VoteUp":"VoteDown"),g,function(a){if(alert(a.message),0===a.error){var b=c.find("em.cnt");b.text((parseInt(b.text())||0)+("#recommend"==d?1:-1))}}),!1}),a("a[href=#declare][data-type]").click(function(){var c,d=a(this),e=d.attr("data-type"),f=d.attr("data-srl"),g=d.attr("data-rec")||"0";return c=prompt(_DXS_MSGS_.declare,""),"string"!=typeof c?!1:c.trim()?(exec_json(e+".proc"+b.ucfirst(e)+"Declare",{target_srl:f,cur_mid:current_mid,mid:current_mid},function(a){if(alert(a.message),0===a.error&&"0"!==g){var b="[Board DX] Declare, received messages: "+f,d=current_url.setQuery("comment_srl","comment"==e?f:"");c=c+'<br /><br /><a href="'+d+'">'+d+"</a>",exec_json("communication.procCommunicationSendMessage",{receiver_srl:g,title:b,content:c},function(a){0!==a.error&&alert(a.message)})}}),!1):(b.miniMsg(d,"Please enter the message."),!1)}),a(".btnAdopt [data-adopt-srl]").click(function(){var c,d=a(this),e=d.attr("data-adopt-srl")||"",f=d.attr("data-adopt-name")||"";return c=prompt("Send thanks message to "+f,""),"string"!=typeof c?!1:c.trim()?(exec_json("beluxe.procBeluxeAdoptComment",{comment_srl:e,send_message:c},function(a){alert(a.message),0===a.error&&location.reload()}),!1):(b.miniMsg(d,"Please enter the message."),!1)}),a("textarea[name=content]",".scFbWt").focus(function(){a(".scWusr",a(this).closest("form")).show("slow")}),a(".scHLink[data-href]").click(function(){return window.open(a(this).attr("data-href"),a(this).attr("data-target")||""),!1}),a(".scToggle[data-target]").click(function(){return a(a(this).attr("data-target")).slideToggle(),!1}),a(".scClipboard").click(function(){var b=a(this),c=b.attr("data-attr")||!1;return prompt("press CTRL+C copy it to clipboard...",c?b.attr(c):b.text()),!1}),a.fn.pidSettingWrite=function(){var b=a(".scWul.extraKeys >li:hidden",this);b.length&&a(".scExTog:hidden",this).show().click(function(){return b.show("slow"),a(this).hide(),!1}),a(".scWcateList",this).change(function(){var b=a(this).val(),c=a(this).data("key"),d=a(".scWcateList[data-key="+c+"]").hide("slow"),e=a(".scWcateList[data-key="+b+"]");a(this).data("key",b),a("input:hidden[name=category_srl]").val(b),a(".scWcateList[data-key="+d.data("key")+"]").hide("slow"),e.find(">option").length&&e.change().show("slow")}),a("input:hidden[name=category_srl]:eq(0)",this).each(function(){var b,c,d=a(this).val()||0;if(d>0)for(b=0;3>b&&(c=a(".scWcateList option[value="+d+"]").closest("select").val(d).data("key",d).change(),c&&c.attr("data-key"));b++)d=c.show("slow").attr("data-key");else a(".scWcateList:eq(0)").change()}),a("a[href=#insert_filelink]",this).click(function(){var b=a(this).closest("#insert_filelink").find("> input"),c=b.val(),d=a(this).attr("data-seq"),e=a(this).attr("data-srl");return void 0!==c&&c?(exec_json("beluxe.procBeluxeInsertFileLink",{mid:current_mid,sequence_srl:d,document_srl:e,filelink_url:c},function(b){if(a("[id^=ckeditor_instance_]").length){var c=xe.getApp("xeuploader");1===c.length?c[0].loadFilelist():c=a("#xefu-container-"+b.sequence_srl).xeUploader()}else a(".xpress-editor").length&&reloadFileList(uploaderSettings[b.sequence_srl]);a("#upload_filelink").val("")}),!1):(alert("Please enter the file url.\nvirtual type example: http://... #.mov"),b.focus(),!1)})};try{var c=a(window.frameElement);if(c.is("[id=pidOiFrame]")){b.pidFrm=c;var d=c.parent().parent(),e=a("body",c[0].contentDocument||c[0].contentWindow.document);a("#BELUXE_MESSAGE[data-valid-id=document_success_registed]").length&&d.attr("data-parent-reload",1),a(".pid_modal-head:eq(0),.pid_modal-foot:eq(0)",d).each(function(b){var c=a("#__PID_MODAL_"+(b?"FOOT":"HEAD")+"ER__",e||"");c.length&&(a(this).html("<div>"+c.eq(0).html()+"</div>").show(),c.remove())}),c=null,d=null,e=null}}catch(f){}a("a",".scSns").click(function(){var c,d,e,f=a(".scElps strong:eq(0)","#siHrm"),g=b.isMobj("m")||!1;switch(d=(g?g.find(".pid_modal-head:eq(0)").text():f.text()).trim(),e=g?g.find(".pid_modal-foot:eq(0)").find("span:last").text():f.attr("title"),d=encodeURIComponent(d),e=encodeURIComponent(e),a(this).attr("data-type")){case"fa":c="http://www.facebook.com/share.php?t="+d+"&u="+e;break;case"de":c="http://www.delicious.com/save?v=5&noui&jump=close&url="+e+"&title="+d;break;default:c="http://twitter.com/home?status="+d+" "+e}return popopen(c,"_pop_sns"),!1}),b.pidFrm||a(window).resize(function(){clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){b.reSized()},500)}),a(window).ready(function(){a("#siWrt").eq(0).pidSettingWrite(),a("a[type^=example\\/modal]","#siBody").pidModalWindow(b.isMobj("b")||""),a("[data-flash-fix=true]","#siBody").pidModalFlashFix(),a("[data-link-fix=true]","#siBody").find("a:not([target])").attr("target","_blank"),b.reSized()}).load(function(){b.reSized();a("a[data-modal-scrollinto=true]:last",b.isMobj("s")||"").parent().is(function(){a(this).closest(".scClst:hidden").is(function(){a(this).show()}),this.scrollIntoView(!0)}),a("input:not(:hidden):eq(0)",".pid_ajax-form").focus(),a("#BELUXE_MESSAGE").each(function(){var b,c=a(this),d=c.closest("body"),e=d.width(),f=c.offset().top+c.outerHeight(),g=d.scrollTop();g>f&&(b=c.clone().width(e-30).addClass("clone").appendTo("body"),setInterval(function(){b.fadeOut(3e3,function(){a(this).remove()})},2e3))})})}),function(a){var b=a.extend({topIndex:function(b){var c=a(b?b:"body"),d=c.is("body")?c:c.closest("body"),e=this.topZidx;if(!e){e=1;try{d.find("> *:not(script)").each(function(){var b=parseInt(a(this).css("z-index")||this.style.zIndex);b>e&&(e=b)})}catch(f){e=99999}e>9999999&&(e=9999999),this.topZidx=e}return e+999},waitMessage:function(b,c){var d=a(c?c:"body"),e=d.is("body")?d:d.closest("body");a(".wait[data-modal-child=message]",e).length||(b=b.setQuery("is_modal",""),$msg=a('<div class="message update wait" data-modal-child="message">').html("<p>"+waiting_message+'<br />If time delays continue, <a href="'+b+'"><span>click here</span></a>.</p>').css({position:"fixed",top:10,left:10,zIndex:this.topIndex(c)+9}),e.append($msg))},iFrame:function(b,c){var d,e=a("#"+b,c);return e.length?e.not(".pid_modal-frame").addClass("pid_modal-target"):(d=a("body",c),e=a('<section id="'+b+'" class="pid_modal-frame">').appendTo(d).hide()),e.find(".pid_modal-body").length||e.append(a('<div class="pid_modal-body">')),e},backDrop:function(b){var c=a("#pidModalBackdrop",b);return c.length||(c=a('<div id="pidModalBackdrop" class="pid_modal-backdrop">').appendTo(a("body",b)).hide()),c}});a.fn.extend({pidModalgoUrl:function(c,d,e,f){var g=a(this),h=a("#pidOiFrame",g),i=function(b){var c=b.contentDocument||b.contentWindow.document;a("script[src*="+_PID_MODULE_+"]",c).length||(a(c).find("a").click(function(b){b.stopPropagation(),b.preventDefault(),parent.location.replace(a(this).attr("href"))}),h.pidModalAutoResize())};c=c.setQuery("is_modal",f),h.length?h.get(0).src=c:h=a('<iframe id="pidOiFrame" name="pid_oi_frame" data-resize="'+d+'" allowTransparency="true" frameborder="0" scrolling="no" />').on("load",function(){a(this).parent().scrollTop(0),i(this),e(this)}).attr("src",c).appendTo(a(".pid_modal-body:eq(0)",g)),b.waitMessage(c,h.closest("body"))},pidModalSetTitle:function(b,c,d){var e,f,g,h=function(b){var c,d={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return c=new RegExp("("+a.map(d,function(a,b){return b}).join("|")+")","g"),b.replace(c,function(a,b){return d[b]})},i=a(this),j=h(b),k=h(c),l=["pid_modal-head","pid_modal-foot"];f=i.find("."+l[0]),f.length||(f=a('<div class="'+l[0]+'">').hide().prependTo(i)),g=i.find("."+l[1]),g.length||(g=a('<div class="'+l[1]+'">').hide().appendTo(i)),j&&":INHERIT:"!==j.substring(0,9)?(j=":GETHTML:"===j.substring(0,9)?a(j.substring(9)).html():"<div>"+j+"</div>",f.html(j).css("display",j?"block":"none")):j||f.html("").css("display","none"),k&&":INHERIT:"!==k.substring(0,9)?(k=":GETHTML:"===k.substring(0,9)?a(k.substring(9)).html():"<div>"+k+"</div>",g.html(k).css("display",k?"block":"none")):k||g.html("").css("display","none"),e=i.find(".pid_modal-close"),e.length||(e=a('<button type="button" title="press esc to close" class="pid_modal-close">&times;</button>').click(d),i.prepend(e))},pidModalAutoResize:function(){var c,d,e,f,g,h,i,j,k,l,m,n=a(this);if(e=n[0].contentDocument||n[0].contentWindow.document,void 0!==e){if(e=a("body",e),c=n.parent().parent(),$target=c.closest("body"),!e.text())return void c.hide();clearInterval(n.data("timer")||0),n.add(e.addClass("pid_modal-document")).scrollTop(0),f=a(".pid_modal-head",c),h=a(".pid_modal-body",c),g=a(".pid_modal-foot",c),k=n.attr("data-resize")||"auto";var o=function(){return setInterval(function(){var a=e.outerHeight(!0);a>10&&(n.height()!==a&&n.height(a),h.height()!==a&&h.height(a)),c.find("#pidOiFrame").length||clearInterval(l)},500)},p=function(){return setInterval(function(){var b,o,p,q;i=d.width(),p=e.outerHeight(!0),c.outerWidth(i-80),p>10&&(j=d.height(),o=(f.outerHeight(!0)||0)+(g.outerHeight(!0)||0),q=j-o-100,q="hfix"===k||p>q?q:p,(n.height()!==p||h.height()!==q)&&(n.height(p),h.css({height:q+"px","overflow-y":p>q?"auto":"hidden"}),m||(m=1,a("a[data-modal-scrollinto=true]:last",e).is(function(){m=a(this).offset().top,n.parent().scrollTop(m)}))),o=c.outerHeight(!0),b=Math.floor((j-o)/2-10),c.css({top:b>10?b:10,left:Math.floor((i-c.outerWidth(!0))/2)})),c.find("#pidOiFrame").length||clearInterval(l)},500)};c.is(".pid_modal-target")?(h.height(1),c.css({top:"",left:""}).show(),l=o(),a("[data-modal-child=message]",$target).fadeOut(1500,function(){a(this).remove()})):(d=b.backDrop($target),i=d.width(),h.height(1),c.outerWidth(i-80).show(),c.position().left<1?c.animate({top:10,left:Math.floor((i-c.outerWidth(!0))/2)},{complete:function(){l=p(),a("[data-modal-child=message]",$target).fadeOut(1500,function(){a(this).remove()})}}):l=p()),n.data("timer",l)}},pidModalWindow:function(c,d){this.not(".pid_modal-anchor").addClass("pid_modal-anchor").each(function(){var b=(a(this).attr("type")||"").split("/");"modal"===b[1]&&(this.modalId=b[2]?b[2]:"pidModalFrame")}).click(function(){var d=a(this),e=b.iFrame(this.modalId,c);return e.hide().css({top:"0",left:"-150%"}),d.trigger("open.mw"),!1}).bind("open.mw",function(){var e,f,g,h,i,j,k,l=a(this),m=0;if(h=a.Event("before-open.mw"),l.trigger(h),h.isDefaultPrevented())return!1;e=b.iFrame(this.modalId,c),e.is(".pid_modal-target")||e.pidModalSetTitle(l.attr("data-header")||l.attr("title")||"",l.attr("data-footer")||"",function(){return l.trigger("close.mw"),!1}),j=l.data("go-url")||l.attr("href")||"about:blank",k=e.is(".pid_modal-target")?3:1,"showing"!==e.data("state")&&(e.data("state","showing"),i=l.data("duration")||"fast",e.is(".pid_modal-target")?e.find("> *").hide(i,function(a){e.find("> .pid_modal-body").show()}):(a(document).on("keydown.mw",function(a){return 27===a.which?(l.trigger("close.mw"),!1):void 0}),g=a("body",c),f=b.backDrop(c).css("z-index","1"),e.css("z-index","5"),b.body_oflow||(b.body_oflow=g.css("overflow-x")),m=b.topIndex(c),f.css("z-index",m).show(),e.css("z-index",m+5).find(".pid_modal-close:first").focus(),g.css("overflow-x","hidden"),d&&f.click(function(){return l.trigger("close.mw"),!1})));var n=function(a){l.trigger("after-open.mw",[a])};e.find(".pid_modal-body").css("overflow-y","hidden"),e.pidModalgoUrl(j,l.attr("data-resize")||"auto",n,k)}).bind("close.mw",function(){var d,e,f,g,h=a(this);if(f=a.Event("before-close.mw"),h.trigger(f),f.isDefaultPrevented())return!1;try{d=b.iFrame(this.modalId,c),d.attr("data-parent-reload")&&pidModalParentReload()}catch(i){return pidModalParentReload(),!1}g=h.data("duration")||"fast",d.data("state","hiding");var j=function(){h.trigger("after-close.mw")};d.is(".pid_modal-target")?d.find("> *").show(g,function(a){d.find("> .pid_modal-head").hide(),d.find("> .pid_modal-body").hide(),d.find("> .pid_modal-foot").hide()}):(e=b.backDrop(c),d.fadeOut(g,function(){j();var d=a(this).hide().find("> .pid_modal-body");a("body",c).css("overflow-x",b.body_oflow||"auto"),e.hide(),d.children().remove()}))})},pidModalFlashFix:function(){a("embed[type*=flash]").each(function(){var b=a(this);"transparent"!=b.attr("wmode"),b.attr("wmode","opaque")}),a("iframe[src*=youtube]").each(function(){var b=a(this);b.attr("src",b.attr("src").setQuery("wmode","opaque"))})}});try{a(window.frameElement).filter(function(){return a(this).is("[id=pidOiFrame]")}).is(function(){var c=a(this),d=c.closest("body");b.waitMessage(window.location.href,d),c.pidModalAutoResize(),window.parent.pidModalParentReload=function(){window.parent.location.replace(window.location.href.setQuery("act","").setQuery("page","").setQuery("is_modal","").setQuery("document_srl","").setQuery("cate_trace",""))},a(document).on("ready",function(){a("[data-modal-hide]").on("click",function(){return c.parent().parent().find(".pid_modal-close:first").click(),!1}),a("input[name],select[name],textarea[name]","form").on("focusin",function(){var b=c.parent(),d=a(this).offset().top;"auto"===b.css("overflow-y")&&b.scrollTop()>d&&b.scrollTop(d)})}),a(window).on("unload",function(){c.parent().height(1).parent().hide().css({top:"0",left:"-150%"}),a("[data-modal-child=message]",d).remove()})})}catch(c){}}(jQuery);